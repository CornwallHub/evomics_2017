- name: Installing Samtools from apt - v0.1.19
  apt: name=samtools state=present

- name: Symbolic link samtools to samtools_old
  shell: ln -s /usr/bin/samtools /usr/bin/samtools_old

- name: Downloading Samtools v1.3
  get_url: url=https://github.com/samtools/samtools/releases/download/1.3.1/samtools-1.3.1.tar.bz2
  dest={{source_dir}}/samtools-1.3.1.tar.bz2
  
- name: Unpacking Samtools v1.3
  unarchive:
    src: "{{source_dir}}/samtools-1.3.1.tar.bz2"
    dest: {{software_dir}}
    copy: no
    creates: "{{software_dir}}/samtools-1.3.1/README"
    
- name: ./configure Samtools v1.3 (with HTSlib)
  shell: "{{item}}"
  args:
   chdir: "{{source_dir}}/samtools"
  with_items:
    - ./configure
    
- name: make Samtools v1.3 (with HTSlib)
  shell: "{{item}}"
  args:
   chdir: "{{source_dir}}/samtools"
  with_items:
    - make
    
- name: make install Samtools v1.3 (with HTSlib)
  shell: "{{item}}"
  args:
   chdir: "{{source_dir}}/samtools"
  with_items:
    - make install
